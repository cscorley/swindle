#!/usr/bin/env python3
# scanner
#
# author: Christopher S. Corley

import os
import sys
import argparse
from swindle.recognizer import parse_file
from swindle.parser import ParseError

def main(argv):
    aparser = argparse.ArgumentParser(description='Scan a file.')
    aparser.add_argument('files', metavar='file', type=str, nargs='+',
                               help='a file for the scanner')

    args = aparser.parse_args()
    try:
        if not parse_file(args.files[0]):
            print("Could not open file for parsing")
        else:
            print("legal")
    except ParseError as e:
        print("illegal")
        print(e.message)

        raise e


if __name__ == '__main__':
    main(sys.argv)
